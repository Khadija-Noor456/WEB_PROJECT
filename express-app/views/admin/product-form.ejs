<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %> - Admin Panel</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/admin.css">
</head>
<body>
  <div class="admin-container">
    <%- include('../partials/admin-sidebar') %>

    <main class="admin-main">
      <header class="admin-header">
        <h1><%= title %></h1>
        <div class="header-actions">
          <span class="user-info">üë§ Admin User</span>
        </div>
      </header>

      <div class="admin-content">
        <div class="form-container">
          <form action="<%= action %>" method="POST" class="product-form">
            <div class="form-grid">
              <!-- Product Name -->
              <div class="form-group full-width">
                <label for="name">Product Name *</label>
                <input 
                  type="text" 
                  id="name" 
                  name="name" 
                  value="<%= product ? product.name : '' %>" 
                  placeholder="e.g., Mountain Landscape Print"
                  required
                >
              </div>

              <!-- Price -->
              <div class="form-group">
                <label for="price">Price ($) *</label>
                <input 
                  type="number" 
                  id="price" 
                  name="price" 
                  step="0.01" 
                  value="<%= product ? product.price : '' %>" 
                  placeholder="149.99"
                  required
                >
              </div>

              <!-- Stock -->
              <div class="form-group">
                <label for="stock">Stock Quantity *</label>
                <input 
                  type="number" 
                  id="stock" 
                  name="stock" 
                  value="<%= product ? product.stock : 0 %>" 
                  placeholder="25"
                  required
                >
              </div>

              <!-- Category -->
              <div class="form-group">
                <label for="category">Category *</label>
                <select id="category" name="category" required>
                  <option value="">Select Category</option>
                  <option value="Prints" <%= product && product.category === 'Prints' ? 'selected' : '' %>>Prints</option>
                  <option value="Workshops" <%= product && product.category === 'Workshops' ? 'selected' : '' %>>Workshops</option>
                  <option value="Equipment" <%= product && product.category === 'Equipment' ? 'selected' : '' %>>Equipment</option>
                  <option value="Books" <%= product && product.category === 'Books' ? 'selected' : '' %>>Books</option>
                  <option value="Calendars" <%= product && product.category === 'Calendars' ? 'selected' : '' %>>Calendars</option>
                </select>
              </div>

              <!-- Rating -->
              <div class="form-group">
                <label for="rating">Rating (0-5)</label>
                <input 
                  type="number" 
                  id="rating" 
                  name="rating" 
                  step="0.1" 
                  min="0" 
                  max="5" 
                  value="<%= product ? product.rating : 0 %>"
                  placeholder="4.8"
                >
              </div>

              <!-- üñºÔ∏è IMAGE URL FIELD - THIS IS WHERE YOU ADD IMAGES! -->
              <!-- ‚ö†Ô∏è IMPORTANT: Image dimensions should match shop page -->
              <!-- Recommended: 800x600px or 16:9 aspect ratio -->
              <div class="form-group full-width">
                <label for="image">Image URL * üñºÔ∏è</label>
                <input 
                  type="url" 
                  id="image" 
                  name="image" 
                  value="<%= product ? product.image : '' %>" 
                  placeholder="https://images.unsplash.com/photo-example?w=800&h=600"
                  required
                >
                <small class="image-help">
                  üì∏ <strong>Image Guidelines:</strong><br>
                  ‚Ä¢ Recommended size: <strong>800x600px</strong> (4:3 ratio) or <strong>800x450px</strong> (16:9 ratio)<br>
                  ‚Ä¢ Use URLs from: Unsplash, Pexels, or your own hosted images<br>
                  ‚Ä¢ Example: <code>https://images.unsplash.com/photo-1506905925346-21bda4d32df4?auto=format&fit=crop&w=800&q=80</code><br>
                  ‚Ä¢ Image will be displayed at <strong>280px height</strong> in shop cards and <strong>400px</strong> in detail view
                </small>
                
                <!-- Image Preview -->
                <div class="image-preview" id="imagePreview" style="display: none;">
                  <p><strong>Preview:</strong></p>
                  <img id="previewImg" src="" alt="Preview" style="max-width: 400px; border-radius: 8px; margin-top: 10px;">
                </div>
              </div>

              <!-- Description -->
              <div class="form-group full-width">
                <label for="description">Description *</label>
                <textarea 
                  id="description" 
                  name="description" 
                  rows="4" 
                  placeholder="Breathtaking mountain landscape captured at golden hour. Premium quality print on archival paper."
                  required
                ><%= product ? product.description : '' %></textarea>
              </div>

              <!-- Featured -->
              <div class="form-group full-width">
                <label class="checkbox-label">
                  <input 
                    type="checkbox" 
                    name="featured" 
                    <%= product && product.featured ? 'checked' : '' %>
                  >
                  <span>‚≠ê Mark as Featured Product</span>
                </label>
              </div>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
              <button type="submit" class="btn btn-primary">
                <%= product ? 'üíæ Update Product' : '‚ûï Add Product' %>
              </button>
              <a href="/admin/products" class="btn btn-secondary">Cancel</a>
            </div>
          </form>
        </div>
      </div>
    </main>
  </div>

  <!-- Image Preview Script -->
  <script>
    const imageInput = document.getElementById('image');
    const imagePreview = document.getElementById('imagePreview');
    const previewImg = document.getElementById('previewImg');

    // Show preview when URL is entered
    imageInput.addEventListener('input', function() {
      const url = this.value.trim();
      if (url) {
        previewImg.src = url;
        imagePreview.style.display = 'block';
        
        // Hide preview if image fails to load
        previewImg.onerror = function() {
          imagePreview.style.display = 'none';
        };
      } else {
        imagePreview.style.display = 'none';
      }
    });

    // Show preview on page load if editing
    if (imageInput.value) {
      previewImg.src = imageInput.value;
      imagePreview.style.display = 'block';
    }
  </script>
</body>
</html>